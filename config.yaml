paths:
  scripts:
    collect: './10_DataCollection.py'
    sort: './20a_DataSorter.py'
    bundle: './20b_DataBundler.py'
    pdfgen: './30_PdfRunlistGenerator.py'
    collateral: './40_GenerateJobCollateral.py'
    pressprep: './60_PreparePressFiles.py'
    impose: './70_GR_Imposition_5x5_BB_BC.py'
    email: './80_email.py'

  stage1_collect:
    input_dir: './_REPORT_INPUT'
    staging_dir: './_STAGING'
    log_dir: './LOGS' # Central log directory

  # --- Paths to assets ---
  watermark_path: './_CONFIG/image.png' # Example macOS path
  color_palette_path: './_CONFIG/colorpalette.csv'
  half_box_icon_path: './_CONFIG/half box.pdf'
  full_box_icon_path: './_CONFIG/full box.pdf'
  imposition_profile_path: './_CONFIG/TXRH BB 25up GangRun.json'
  marks_template_path: './_CONFIG/25up_marks_template_13x19.pdf'
  
  icon_A_path: './_CONFIG/icon_A.pdf'
  icon_B_path: './_CONFIG/icon_B.pdf'
  icon_C_path: './_CONFIG/icon_C.pdf'
  icon_D_path: './_CONFIG/icon_D.pdf'
  icon_E_path: './_CONFIG/icon_E.pdf'
  icon_F_path: './_CONFIG/icon_F.pdf'
  icon_G_path: './_CONFIG/icon_G.pdf'
  icon_H_path: './_CONFIG/icon_H.pdf'
  icon_I_path: './_CONFIG/icon_I.pdf'
  icon_J_path: './_CONFIG/icon_J.pdf'

  dynamic_build_root: '/Volumes/AraxiVolume_Jobs/Jobs/DigimasterProductionNew/MARCOM orders/' # production path
  #dynamic_build_root: './'   # testing path
  
  dynamic_job_structure:
    job_tickets: "_JobTickets"
    data_logs: "_DataFiles_LogFiles"
    workup: "WorkUp"
    one_up_files: "OneUpFiles"       # This will be nested under 'workup'
    originals: "Originals"           # This will be nested under 'workup'
    production_imposed: "ProductionImposed"
    imposed_subfolders:
      - "25up"
      - "12ptBounceBack"
      - "16ptBusinessCard"
      - "BubbasPostCard"
      - "Gang"
      - "KidsBookmarkHappyTeeth"
      - "Mobile_App_80lb"
      - "Mobile_App_Other"
      - "Pads_TXRH_Achievement"
      - "Pads_Bubbas_Achievement"
      - "Pads_Free_For_A_Year"
      - "ThankYouCard"
      - "Other"

# --- New section for script 80 ---
email_settings:
  smtp_server: "smtp.gmail.com"
  smtp_port: 587
  sender_email: "production@clarkandriggs.com"
  recipient_list: "prepress@clarkandriggs.com, jwatson@clarkandriggs.com, jmattingly@clarkandriggs.com, bthomas@clarkandriggs.com, clear@clarkandriggs.com, jprather@clarkandriggs.com, jswindler@clarkandriggs.com"
  smtp_user: "production@clarkandriggs.com"
  smtp_pass: "qtpy zcbz iall rufb"

# --- Config-driven rules for header cards, segmentation, and blanks ---
shipping_box_rules:
  # --- Rules for "Prepended" (Leftover) sheets ---
  "12ptBounceBack": # Key must match sheet name from script 20
    "250":
      icon_file: "icon_A.pdf" # Corresponds to key in 'paths'
      icon_cards: 1
      extra_blanks: 48
    "500":
      icon_file: "icon_B.pdf"
      icon_cards: 1
      extra_blanks: 48
    "1000":
      icon_file: "icon_C.pdf"
      icon_cards: 2
      extra_blanks: 46
    "2500":
      icon_file: "icon_D.pdf"
      icon_cards: 3
      extra_blanks: 44
    "4000":
      icon_file: "icon_E.pdf"
      icon_cards: 5
      extra_blanks: 40

  "16ptBusinessCard": # Key must match sheet name from script 20
    "250":
      icon_file: "icon_F.pdf"
      icon_cards: 1
      extra_blanks: 48
    "500":
      icon_file: "icon_G.pdf"
      icon_cards: 1
      extra_blanks: 48
    "1000":
      icon_file: "icon_H.pdf"
      icon_cards: 2
      extra_blanks: 46
    "2500":
      icon_file: "icon_I.pdf"
      icon_cards: 5
      extra_blanks: 40
    "4000":
      icon_file: "icon_J.pdf"
      icon_cards: 8
      extra_blanks: 34

  # --- Rules for "Segmented" (Gang Run) sheets ---
  "12ptBB-GR-*": # Key now matches prefix (e.g., "12ptBB-GR-144")
    "250":
      icon_file: "icon_A.pdf"
      icon_cards: 1
      total_segments: 1
      stack_cards: 0
    "500":
      icon_file: "icon_B.pdf"
      icon_cards: 1
      total_segments: 2
      stack_cards: 1
    "1000":
      icon_file: "icon_C.pdf"
      icon_cards: 2
      total_segments: 4
      stack_cards: 2
    "2500":
      icon_file: "icon_D.pdf"
      icon_cards: 3
      total_segments: 10
      stack_cards: 7
    "4000":
      icon_file: "icon_E.pdf"
      icon_cards: 5
      total_segments: 16
      stack_cards: 11 # 16 total - 5 icon = 11 stack

  "16ptBC-GR-*": # Key now matches prefix (e.g., "16ptBC-GR-144")
    "250":
      icon_file: "icon_F.pdf"
      icon_cards: 1
      total_segments: 1
      stack_cards: 0
    "500":
      icon_file: "icon_G.pdf"
      icon_cards: 1
      total_segments: 2
      stack_cards: 1
    "1000":
      icon_file: "icon_H.pdf"
      icon_cards: 2
      total_segments: 4
      stack_cards: 2
    "2500":
      icon_file: "icon_I.pdf"
      icon_cards: 5
      total_segments: 10
      stack_cards: 5
    "4000":
      icon_file: "icon_J.pdf"
      icon_cards: 8
      total_segments: 16
      stack_cards: 8

  
stage1_source_files:
  job_ticket: 'Job_Ticket_Summary'
  total_order: 'Total_Order_Summary'
  order_ship: 'Order_And_Ship_Detail'

# Config needed by Stage 2 (Copied from original 20_DataSorting config.yaml)
column_names:
  cost_center: "cost_center"
  product_id: "product_id"
  order_number: "order_number"
  job_ticket_number: "job_ticket_number"
  quantity_ordered: "quantity_ordered"
  paper_description: "paper_description"
  product_description: "product_description"
  sku: "sku"
  order_date: "order_date"
  ship_date: "ship_date"
  one_up_output_file_url: "1-up_output_file_url"
  
  # --- NEW: Centralized 'magic string' from script ---
  base_job_ticket_number: "Base Job Ticket Number"

product_ids:
  
  # Outsource has the highest priority
  Outsource:
    - "156"
    - "180"
    - "181"
    - "182"
    - "183"
    - "184"
    - "185"
    - "186"
    - "187"
    - "188"
    - "189"
    - "1376"
    - "2690"
    - "2768"
    - "3549"
    - "3590"
    - "3933"
    - "4655"
    - "4678"
    - "4730"

  LargeFormat:
    - "5"
    - "6"
    - "68"
    - "80"
    - "89"
    - "141"
    - "157"
    - "160"
    - "161"
    - "178"
    - "197"
    - "235"
    - "237"
    - "288"
    - "291"
    - "315"
    - "339"
    - "340"
    - "350"
    - "364"
    - "985"
    - "1375"
    - "1380"
    - "1806"
    - "1929"
    - "1993"
    - "2067"
    - "2143"
    - "2169"
    - "2251"
    - "2343"
    - "2363"
    - "2366"
    - "2370"
    - "2485"
    - "2567"
    - "2568"
    - "2580"
    - "2582"
    - "2626"
    - "2641"
    - "2771"
    - "2772"
    - "2775"
    - "2808"
    - "2809"
    - "2810"
    - "2811"
    - "2960"
    - "2967"
    - "3010"
    - "3015"
    - "3017"
    - "3020"
    - "3023"
    - "3065"
    - "3234"
    - "3257"
    - "3285"
    - "3623"
    - "3624"
    - "3625"
    - "3629"
    - "3683"
    - "3684"
    - "3685"
    - "3686"
    - "3688"
    - "3689"
    - "3690"
    - "3692"
    - "3826"
    - "3976"
    - "4093"
    - "4094"
    - "4097"
    - "4098"
    - "4099"
    - "4103"
    - "4105"
    - "4107"
    - "4384"
    - "4387"
    - "4434"
    - "4495"
    - "4496"
    - "4498"
    - "4499"
    - "4502"
    - "4503"
    - "4504"
    - "4505"
    - "4506"
    - "4507"
    - "4508"
    - "4520"
    - "4534"
    - "4544"
    - "4558"
    - "4585"
    - "4594"
    - "4596"
    - "4601"
    - "4605"
    - "4606"
    - "4612"
    - "4633"
    - "4635"
    - "4636"
    - "4641"
    - "4648"
    - "4656"
    - "4658"
    - "4665"
    - "4666"
    - "4668"
    - "4671"
    - "4687"
    - "4688"
    - "4689"
    - "4690"
    - "4708"
    - "4710"
    - "4744"
    - "4815"
    - "4817"

  16ptBusinessCard:
    - "1"
    - "2"
    - "69"
    - "228"
    - "1371"
    - "1372"
    - "1381"
    - "1382"
    - "1398"
    - "3556"
    - "4486"
    - "4740"

  12ptBounceBack:
    - "4"
    - "27"
    - "166"
    - "200"
    - "214"
    - "215"
    - "216"
    - "217"
    - "218"
    - "219"
    - "220"
    - "1982"
    - "2173"
    - "2303"
    - "2549"
    - "2561"
    - "2807"
    - "3007"
    - "3230"
    - "3415"
    - "3532"
    - "3533"
    - "3534"
    - "3535"
    - "3536"
    - "3537"
    - "3538"
    - "3539"
    - "3540"
    - "3542"
    - "3543"
    - "4392"
    - "4531"
    - "4532"
    - "4660"
    - "4743"
  
  PrintOnDemand:
    - "3"
    - "26"
    - "70"
    - "144"
    - "176"
    - "207"
    - "232"
    - "234"
    - "290"
    - "313"
    - "342"
    - "349"
    - "1800"
    - "1939"
    - "2311"
    - "2635"
    - "2823"
    - "2969"
    - "2970"
    - "3229"
    - "3977"
    - "4122"
    - "4599"
    - "4657"
    - "4751"
    - "4756"
    - "4758"
  
  25up layout:
    - "3232"

categorization_rules:
  business_card_identifiers: ['16pt', '16 pt']
  high_quantity_threshold: 4000 # This is used by 20a_DataSorter.py

bundling_rules:
  # --- KEYS ---
  # 1. The final, "padded" quantity for all bundles
  preferred_bundle_quantity: 6250

  # 2. The list of data quantities the algorithm will search for
  bundle_search_thresholds:
    - 6250
    - 6000
    - 5750

  # 3. The map defining how to pad partial bundles
  #    Keys are from the search_thresholds, values are the total gap qty
  filler_padding_map:
    6250: 0     # 6250-data gets 0 filler
    6000: 250   # 6000-data gets 250 filler (1 row)
    5750: 500   # 5750-data gets 500 filler (2 rows)

  # --- NEW: Centralized filler "BLANK" definitions ---
  filler_definitions:
    BLANK-01:
      qty: 250
      path: "./_CONFIG/BLANK-01.pdf"
    BLANK-02:
      qty: 250
      path: "./_CONFIG/BLANK-02.pdf"
  
  # --- Rule to disqualify jobs before bundling ---
  disqualify_jobs_over_quantity:
    enabled: true
    threshold: 1000
    categories: ["12ptBounceBack", "16ptBusinessCard"]

  # --- Rules to define bundle/leftover names ---
  12ptBounceBack: # <-- This key must match the category name from 20a
    bundle_name_suffix: "12ptBB-GR-"
    leftover_sheet_name: "12ptBounceBack"

  16ptBusinessCard: # <-- This key must match the category name from 20a
    bundle_name_suffix: "16ptBC-GR-"
    leftover_sheet_name: "16ptBusinessCard"
    
  # --- NEW: Fallback for un-routed leftovers ---
  leftover_category_fallback: "PrintOnDemand"
  
  fail_on_fragmentation_violation: false  # Set to true to crash on error
  
  exempt_categories:
    - "PrintOnDemand"
    - "LargeFormat"
    - "Outsource"
    - "25up layout"
  
sheet_output_order:
  - "BUNDLES"
  - "12ptBounceBack"
  - "16ptBusinessCard"
  - "25up layout"
  - "exceptions"
  - "LargeFormat"
  - "Outsource"
  - "PrintOnDemand"

pdf_settings:
  generate_pdf_run_lists: true